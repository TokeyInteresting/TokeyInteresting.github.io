<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="TokeyRoad">
<meta name="keywords" content="Road">
<meta property="og:type" content="website">
<meta property="og:title" content="轩中听雨">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="轩中听雨">
<meta property="og:description" content="TokeyRoad">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="轩中听雨">
<meta name="twitter:description" content="TokeyRoad">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/">





  <title>轩中听雨</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">轩中听雨</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">TokeyRoad</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/29/STL算法-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/29/STL算法-1/" itemprop="url">STL算法(1)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-29T17:15:34+08:00">
                2019-04-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/STL/" itemprop="url" rel="index">
                    <span itemprop="name">STL</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="stable-sort-amp-partial-sort-amp-nth-element-amp-is-sorted-amp-is-sorted-until-amp-merge-amp-inplace-merge-amp-find-if"><a href="#stable-sort-amp-partial-sort-amp-nth-element-amp-is-sorted-amp-is-sorted-until-amp-merge-amp-inplace-merge-amp-find-if" class="headerlink" title="stable_sort&amp;partial_sort&amp;nth_element&amp;is_sorted&amp;is_sorted_until&amp;merge&amp;inplace_merge&amp;find_if"></a>stable_sort&amp;partial_sort&amp;nth_element&amp;is_sorted&amp;is_sorted_until&amp;merge&amp;inplace_merge&amp;find_if</h2><p>准备工作</p>
<pre><code>struct Msg {
    int index;
    int msg;
};
//用于打印显式
void PrintVec(vector&lt;Msg&gt;::iterator iter_begin, vector&lt;Msg&gt;::iterator iter_end) {
    for (auto iter = iter_begin; iter != iter_end; iter++) {
        if (iter != iter_begin) {
            cout &lt;&lt; &quot;--&quot;;
        }
        cout &lt;&lt; iter-&gt;index &lt;&lt; &quot;:&quot; &lt;&lt; iter-&gt;msg;
    }
    cout &lt;&lt; endl &lt;&lt; endl;
}
</code></pre><p>生成数据（所有的排序针对index，msg只是为了标识稳定与否）</p>
<pre><code>vector&lt;Msg&gt; v_msg;
//vector&lt;Msg&gt; v_msg_sec;
Msg temp_msg;
int count = 10; 
srand((int)time(0));
for (int i = 0; i &lt; count; i++) {
    temp_msg.index = rand() % 100;
    temp_msg.msg = i;
    v_msg.push_back(temp_msg);
    //if (rand() % 2 == 0 &amp;&amp; i != 0) {
    //    temp_msg.index = rand() % 100;
    //    temp_msg.msg = i;
    //    v_msg_sec.push_back(temp_msg);
    //}
}
</code></pre><ul>
<li><p>stable_sort<br>第三个参数表示 排序的要求（升降序）以及自定义方法.（稳定的排序）<br>  <code>::stable_sort(v_msg.begin(), v_msg.end(), [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &lt; m2.index; });//升序(默认升序)</code><br>排序前：<code>v_msg:86:0--42:1--74:2--45:3--55:4--42:5--91:6--15:7--59:8--50:9</code><br>排序后：<code>v_msg:15:7--42:1--42:5--45:3--50:9--55:4--59:8--74:2--86:0--91:6</code></p>
</li>
<li><p>partial_sort<br>（first,second,last,func） 部分排序 将从first到last中的数据 按照func的规则  排出first到second区间的数量，剩余部分不管（即剩余部分乱序）<br>  <code>::partial_sort(v_msg.begin(), v_msg.begin() + 5, v_msg.end(), [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &gt; m2.index; });//降序(默认升序)</code><br>排序前：<code>v_msg:48:0--6:1--23:2--68:3--59:4--23:5--78:6--46:7--75:8--60:9</code><br>排序后：<code>v_msg:78:6--75:8--68:3--60:9--59:4--6:1--23:2--23:5--46:7--48:0</code></p>
</li>
<li><p>nth_element<br>(first,n,second,func) 执行之后会使数组（执行后）的第n个元素之前的都比他小（大）之后的都比他大（小），对应升序（降序）<br>但是 这个元素 前后的两个部分 不一定有序(如果数据量小，不易出现，此处数据量调为50个)<br><code>::nth_element(v_msg.begin(), v_msg.begin() + 15, v_msg.end(), [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &gt; m2.index; });//降序(默认升序)</code><br>排序前：</p>
<pre><code>v_msg:3:0--39:1--57:2--73:3--96:4--70:5--76:6--19:7--72:8--32:9--38:10--54:11--84:12--17:13--51:14
--86:15--11:16--73:17--36:18--47:19--37:20--7:21--8:22--46:23--0:24--90:25--47:26--31:27--80:28
--7:29--65:30--30:31--57:32--74:33--91:34--30:35--31:36--93:37--92:38--92:39--69:40--55:41--82:42
--80:43--92:44--50:45--17:46--13:47--70:48--24:49
</code></pre><p>排序后：</p>
<pre><code>v_msg:84:12--92:38--93:37--91:34--96:4--86:15--80:43--80:28--92:44--82:42--90:25--92:39--76:6
--74:33--73:3--73:17--72:8--70:5--70:48--69:40--65:30--57:2--57:32--55:41--54:11--51:14--50:45
--47:26--47:19--46:23--39:1--38:10--37:20--36:18--32:9--31:36--31:27--30:31--30:35--3:0--19:7
--0:24--11:16--7:29--17:13--8:22--17:46--13:47--7:21--24:49
</code></pre></li>
<li><p>is_sorted<br>检查指定的区间 是否有序（按规定的排序） 返回true false<br><code>::sort(v_msg.begin(), v_msg.end(), [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &gt; m2.index; });</code><br><code>bool res = ::is_sorted(v_msg.begin(), v_msg.end(), [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &gt; m2.index; });</code><br><code>cout &lt;&lt; res &lt;&lt; endl &lt;&lt; endl;</code><br>第一行注释 即输出0  反之输出1</p>
</li>
<li><p>is_sorted_until<br>在指定的区间 按规定的排序 去查找第一个上边界 如果是有序的  则返回end 否则返回指向上边界的迭代器<br>上边界（降序）： 5 4 3 3/4 则第三位3为降序的第一个上边界<br><code>auto f_iter = ::is_sorted_until(v_msg.begin(), v_msg.end(), [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &lt; m2.index; });</code></p>
</li>
<li><p>merge<br>合并两个有序数组，并存放到第三个数组（理论上第三个数组可以是前两个之一，但是会出现不可预知的错误），可规定排序规则<br>merge不会新增元素，所以第三个数组需要提前准备好空间<br>merge返回值是合并之后指向合并最后一个元素的下一个位置<br>三个排序规则必须相同<br><code>auto r_iter = ::merge(v_msg.begin(), v_msg.end(), v_msg_sec.begin(), v_msg_sec.end(), v_merge.begin(), [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &lt; m2.index; });</code></p>
</li>
<li><p>inplace_merge</p>
<pre><code>(first,second,last) [first,second),[second,last) 是两个有序数组， 然后在同一数组内合并
::sort(v_msg.begin(), v_msg.begin() + 5, [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &gt; m2.index; });
::sort(v_msg.begin() + 5, v_msg.end(), [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &gt; m2.index; });
cout &lt;&lt; &quot;v_msg:&quot;;
PrintVec(v_msg.begin(), v_msg.end());
::inplace_merge(v_msg.begin(), v_msg.begin() + 5, v_msg.end(), [](const Msg&amp; m1, const Msg&amp; m2) {return m1.index &gt; m2.index; });
</code></pre><p>排序前：<code>v_msg:69:0--56:2--50:3--29:4--7:1--94:9--62:5--61:8--57:6--40:7</code><br>排序后：<code>v_msg:94:9--69:0--62:5--61:8--57:6--56:2--50:3--40:7--29:4--7:1</code></p>
</li>
<li><p>find_if<br>根据第三个参数的规则 来查找所需的对象 返回指向对象位置的迭代器 没有则返回end<br><code>auto iter = ::find_if(v_msg.begin(), v_msg.end(), [&amp;temp_msg](Msg m1) {return m1.index &lt; temp_msg.index; });</code></p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/29/C++关键字final/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/29/C++关键字final/" itemprop="url">C++关键字final</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-29T11:38:01+08:00">
                2019-04-29
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="C-11的新特性之final"><a href="#C-11的新特性之final" class="headerlink" title="C++ 11的新特性之final"></a>C++ 11的新特性之final</h2><p>final是说明符而不是关键字，这意味着可以将它用作标识符(override同样)</p>
<p>说明符final，用于阻止派生类覆盖特定的虚方法。或者是阻止一个类成为基类。</p>
<pre><code>class Base {
    virtual void f();
};

class A :Base {
    void f() final;        //override  也是最后一次override
    void g() final;        //Error 不能使用final修饰符声明非虚函数
};

class B final :A {
    void f() override;    //父类已经声明为final 不能被override
};

class C :B {            //class B已声明为final 不能被继承
    //
};
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/04/21/TCP Socket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/04/21/TCP Socket/" itemprop="url">TCP Socket</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-04-21T23:37:00+08:00">
                2019-04-21
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网络协议/" itemprop="url" rel="index">
                    <span itemprop="name">网络协议</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一个简单的TCP socket通讯的实例。</p>
<p>功能简单说明：<br>服务端主线程一直阻塞在accept，每连接上一个客户端，就创建一个新的线程去处理这个客户端的消息。<br>其中新线程中一直处于接收客户端的消息中，每接收一次都回复一个keep alive，当收到来自客户端stop消息时，就断开连接，并关闭当前线程。</p>
<p><strong>一.服务端</strong></p>
<ol>
<li>创建套接字<pre><code>WORD sockVersion = MAKEWORD(2, 2);
WSADATA wsaData;
if (WSAStartup(sockVersion, &amp;wsaData) != 0) {
    return 0;
}
//WSA(Windows Sockets Asynchronous，Windows异步套接字)的启动命令
</code></pre></li>
<li>绑定套接字到IP和端口<pre><code>//创建并初始化socket
SOCKET listen_socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
if (listen_socket == INVALID_SOCKET) {
    printf(&quot;socket init error code:%d&quot;, WSAGetLastError());
    return 0;
}
//绑定结构
struct sockaddr_in sin;
sin.sin_family = AF_INET;
sin.sin_port = htons(6666);
sin.sin_addr.S_un.S_addr = INADDR_ANY;
//绑定
if (bind(listen_socket, (LPSOCKADDR)&amp;sin, sizeof(sin)) != 0) {
    printf(&quot;bind socket error code:%d&quot;, WSAGetLastError());
    closesocket(listen_socket);//注意socket回收
    return 0;
}
</code></pre></li>
<li>监听端口<pre><code>//int listen( int sockfd, int backlog);
//sockfd：用于标识一个已捆绑未连接套接口的描述字。
//backlog：等待连接队列的最大长度。
if (listen(listen_socket, 5) != 0) {
    printf(&quot;listen socket error code:%d&quot;, WSAGetLastError());
    closesocket(listen_socket);
    return 0;
}
</code></pre></li>
<li><p>等待客户端连接，每连接一个可以创建一个对应的套接字和线程去处理对应的消息</p>
<pre><code>//等待客户端连接 线程在这里会阻塞
sClient = accept(listen_socket, (LPSOCKADDR)&amp;remoteAddr, &amp;slen);

if (sClient == INVALID_SOCKET) {
    printf(&quot;accept client error code:%d&quot;, WSAGetLastError());
    continue;
}
else {
    printf(&quot;connect success\n&quot;);
    DWORD handleID; 
    //当连接成功时，创建一个线程处理该客户端的消息，然后继续等待下一个客户端的连接
    HANDLE handleSecond = CreateThread(NULL, 0, ClientChat, (LPVOID)sClient, 0, &amp;handleID);
}
</code></pre></li>
<li>处理完之后需要回收线程和回收socket<pre><code>//回收线程
CloseHandle(handle);
//回收socket
closesocket(listen_socket);
//WSA套接字清理
WSACleanup();
</code></pre></li>
</ol>
<p><strong>二.客户端</strong></p>
<ol>
<li><p>创建套接字，初始化等。（和服务端一致）</p>
</li>
<li><p>连接服务端</p>
<pre><code>sockaddr_in sin;
sin.sin_family = AF_INET;
sin.sin_port = htons(6666);
//sin.sin_addr.S_un.S_addr = inet_addr(&quot;127.0.0.1&quot;);
inet_pton(AF_INET, &quot;192.168.0.190&quot;, (void*)&amp;sin.sin_addr.S_un.S_addr);
// 与指定地址端口连接
if (connect(clientSocket, (LPSOCKADDR)&amp;sin, sizeof(sin)) == SOCKET_ERROR) {
    printf(&quot;connect error code:%d&quot;, WSAGetLastError());
    closesocket(clientSocket);
    return  0;
}
else {
    printf(&quot;connect success\n&quot;);
}
</code></pre></li>
<li>和服务端之间收发消息<pre><code>char rcv[256] = &quot;&quot;;
std::cout &lt;&lt; &quot;please input:&quot;;
char sendData[128];
while (std::cin &gt;&gt; sendData) {
    // 向服务端发数据
    int res = send(clientSocket, sendData, strlen(sendData), 0);
    if (res == SOCKET_ERROR) {
        printf(&quot;client send data error code:%d\n&quot;, WSAGetLastError());
    }
    else {
        printf(&quot;client send data success\n&quot;);
    }
    //检测到发送的数据是stop时 断开连接
    if (strcmp(sendData, &quot;stop&quot;) == 0) {
        break;
    }
    //接收数据之前先清空缓冲区，否则会有前一次传输的脏数据
    memset(rcv, 0, sizeof(rcv));
    int rec_res = recv(clientSocket, rcv, sizeof(rcv), 0);
    if (rec_res &gt; 0) {
        printf(&quot;receive server bytes:%d, data:%s\n&quot;, res, rcv);
        if (strcmp(rcv, &quot;stop&quot;) == 0) {
            break;
        }
    }
    else if (rec_res == 0) {
        printf(&quot;socket has closed\n&quot;);
    }
    else {
        printf(&quot;recv failed: %d\n&quot;, WSAGetLastError());
    }
    std::cout &lt;&lt; &quot;please input:&quot;;
}
</code></pre></li>
<li>socket回收 同服务端</li>
</ol>
<p>源代码：<br>服务端：</p>
<pre><code>//Server.cpp
#include &lt;stdio.h&gt;
#include &lt;WinSock2.h&gt;
#include &lt;iostream&gt;
#include &lt;process.h&gt;

#pragma comment( lib, &quot;ws2_32.lib&quot;)

#define MAX_THREAD 10
struct ThreadMessage{
    SOCKET socket;
    DWORD id;
};

DWORD WINAPI ClientChat(LPVOID param);

int main() {
    WORD sockVersion = MAKEWORD(2, 2);
    WSADATA wsaData;

    if (WSAStartup(sockVersion, &amp;wsaData) != 0) {
        return 0;
    }
    SOCKET listen_socket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (listen_socket == INVALID_SOCKET) {
        printf(&quot;socket init error code:%d&quot;, WSAGetLastError());
        return 0;
    }

    struct sockaddr_in sin;
    sin.sin_family = AF_INET;
    sin.sin_port = htons(6666);
    sin.sin_addr.S_un.S_addr = INADDR_ANY;

    if (bind(listen_socket, (LPSOCKADDR)&amp;sin, sizeof(sin)) != 0) {
        printf(&quot;bind socket error code:%d&quot;, WSAGetLastError());
        closesocket(listen_socket);
        return 0;
    }

    if (listen(listen_socket, 5) != 0) {
        printf(&quot;listen socket error code:%d&quot;, WSAGetLastError());
        closesocket(listen_socket);
        return 0;
    }

    sockaddr_in remoteAddr;
    SOCKET sClient;
    int slen = sizeof(remoteAddr);
    char rcv[512];
    ThreadMessage thread[MAX_THREAD];
    int i = 0;
    while (true) {
        printf(&quot;server is ready, waiting for client ...&quot;);
        sClient = accept(listen_socket, (LPSOCKADDR)&amp;remoteAddr, &amp;slen);

        if (sClient == INVALID_SOCKET) {
            printf(&quot;accept client error code:%d&quot;, WSAGetLastError());
            continue;
        }
        else {
            printf(&quot;connect success\n&quot;);
            DWORD handleID; 
            thread[i].id = i;
            thread[i].socket = sClient;
            HANDLE handleSecond = CreateThread(NULL, 0, ClientChat, &amp;thread[i], 0, &amp;handleID);
            i++;
        }

    }

    closesocket(listen_socket);
    WSACleanup();

    return 0;
}

DWORD WINAPI ClientChat(LPVOID param) {
    ThreadMessage* msg = (ThreadMessage*)param;
    HANDLE handle = GetCurrentThread();
    if (msg-&gt;socket == INVALID_SOCKET) {
        printf(&quot;thread change error code:%d&quot;, WSAGetLastError());
        CloseHandle(handle);
        return 0;
    }
    char rcv[256] = &quot;&quot;;
    while (1) {
        char sendData[256] = &quot;keep alive&quot;; 
        memset(rcv, 0, strlen(rcv));
        int res = recv(msg-&gt;socket, rcv, sizeof(rcv), 0);
        if (res &gt; 0) {
            printf(&quot;tag:%d, receive client bytes:%d, data:%s\n&quot;, msg-&gt;id, res, rcv);
            if (strcmp(rcv, &quot;stop&quot;) == 0) {
                memset(sendData, 0, strlen(sendData));
                sprintf_s(sendData, &quot;stop&quot;);
                send(msg-&gt;socket, sendData, strlen(sendData), 0);
                break;
            }
            send(msg-&gt;socket, sendData, strlen(sendData), 0);
        }
        else if (res == 0) {
            printf(&quot;socket has closed\n&quot;);
        }
    }
    printf(&quot;close thread! \n&quot;);
    CloseHandle(handle);

}
</code></pre><p>客户端：</p>
<pre><code>//Client.cpp
#include &lt;stdio.h&gt;
#include &lt;WinSock2.h&gt;
#include&lt;WS2tcpip.h&gt;
#include &lt;iostream&gt;
#pragma comment(lib, &quot;ws2_32.lib&quot;)

int main() {
    WORD wsaVer = MAKEWORD(2, 2);
    WSADATA wsaData;

    if (WSAStartup(wsaVer, &amp;wsaData) != 0) {
        return 0;
    }

    SOCKET clientSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (clientSocket == INVALID_SOCKET) {
        printf(&quot;clientSocket error code:%d&quot;, WSAGetLastError());
        return 0;
    }

    sockaddr_in sin;
    sin.sin_family = AF_INET;
    sin.sin_port = htons(6666);
    //sin.sin_addr.S_un.S_addr = inet_addr(&quot;127.0.0.1&quot;);
    inet_pton(AF_INET, &quot;192.168.0.190&quot;, (void*)&amp;sin.sin_addr.S_un.S_addr);

    if (connect(clientSocket, (LPSOCKADDR)&amp;sin, sizeof(sin)) == SOCKET_ERROR) {
        printf(&quot;connect error code:%d&quot;, WSAGetLastError());
        closesocket(clientSocket);
        return  0;
    }
    else {
        printf(&quot;connect success\n&quot;);
    }

    char * sData = &quot;Hello Server!&quot;;
    int res = send(clientSocket, sData, strlen(sData), 0);
    if (res == SOCKET_ERROR) {
        printf(&quot;client send data error code:%d\n&quot;, WSAGetLastError());
    }
    else {
        printf(&quot;client send data success\n&quot;);
    }
    char rcv[256] = &quot;&quot;;
    std::cout &lt;&lt; &quot;please input:&quot;;
    char sendData[128];
    while (std::cin &gt;&gt; sendData) {
        int res = send(clientSocket, sendData, strlen(sendData), 0);
        if (res == SOCKET_ERROR) {
            printf(&quot;client send data error code:%d\n&quot;, WSAGetLastError());
        }
        else {
            printf(&quot;client send data success\n&quot;);
        }
        if (strcmp(sendData, &quot;stop&quot;) == 0) {
            break;
        }
        memset(rcv, 0, sizeof(rcv));
        int rec_res = recv(clientSocket, rcv, sizeof(rcv), 0);
        if (rec_res &gt; 0) {
            printf(&quot;receive server bytes:%d, data:%s\n&quot;, res, rcv);
            if (strcmp(rcv, &quot;stop&quot;) == 0) {
                break;
            }
        }
        else if (rec_res == 0) {
            printf(&quot;socket has closed\n&quot;);
        }
        else {
            printf(&quot;recv failed: %d\n&quot;, WSAGetLastError());
        }
        std::cout &lt;&lt; &quot;please input:&quot;;
    }
    closesocket(clientSocket);
    std::cout &lt;&lt; &quot;socket close!\n&quot;;
    system(&quot;pause&quot;);
    return 0;
}
</code></pre>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/30/HTTP请求方法/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/30/HTTP请求方法/" itemprop="url">HTTP请求方法</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-30T21:38:16+08:00">
                2019-03-30
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网络协议/" itemprop="url" rel="index">
                    <span itemprop="name">网络协议</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="HTTP请求方法"><a href="#HTTP请求方法" class="headerlink" title="HTTP请求方法"></a>HTTP请求方法</h3><p>​    常用的HTTP请求方式为GET/POST。</p>
<p>​    根据HTTP标准，HTTP有以下多种请求方式：</p>
<p>​    HTTP1.0定义了三种请求方法：GET、POST和HEAD方法。</p>
<p>​    HTTP1.1新增了五种请求方法：OPTIONS、PUT、DELETE、TRACE和CONNECT方法。</p>
<ol>
<li>GET：请求指定的页面信息，并返回实体主体。</li>
<li>HEAD：类似于GET请求，只不过返回的响应中没有具体的内容，只是用于获取报头。</li>
<li>POST：向指定资源提交数据进行处理请求，数据被包含在请求体中。POST请求可能会导致新的资源的生成或者已有资源的修改。（多用于表单提交）</li>
<li>PUT：从客户端向服务器传送的数据取代指定的文档的内容。</li>
<li>DELETE：请求服务器删除指定的页面。</li>
<li>CONNECT：预留给能够将连接改为管道方式的代理服务器。</li>
<li>OPTIONS：允许客户端查看服务器的性能。</li>
<li>TRACE：回显服务器收到的请求，主要用于测试或诊断。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/28/HTTP协议-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/28/HTTP协议-1/" itemprop="url">HTTP协议(1)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-28T21:56:48+08:00">
                2019-03-28
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网络协议/" itemprop="url" rel="index">
                    <span itemprop="name">网络协议</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="HTTP协议（1）"><a href="#HTTP协议（1）" class="headerlink" title="HTTP协议（1）"></a><strong>HTTP协议</strong>（1）</h3><h4 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h4><p>​    HTTP协议是Hyper Text Transfer Protocol（超文本传输协议）的缩写，从万维网（World Wide Web）传输超文本到本地浏览器的协议。</p>
<h4 id="工作原理"><a href="#工作原理" class="headerlink" title="工作原理"></a>工作原理</h4><p>​    HTTP协议是工作在C/S架构上的，浏览器作为HTTP客户端通过URL向HTTP服务端（WEB服务器）发送数据请求。</p>
<p>​    常用的WEB服务器：Apache，Nginx，IIS服务器等。</p>
<p>​    服务器接收到请求之后，向客户端响应信息即回复。</p>
<p>​    HTTP默认端口号80，可自己在WEB服务器上修改。</p>
<h5 id="HTTP注意事项"><a href="#HTTP注意事项" class="headerlink" title="HTTP注意事项"></a>HTTP注意事项</h5><ol>
<li><p>HTTP是无连接的：即每次只能处理一个请求，每次服务端收到请求之后就立马处理并回复，收到客户端的应答之后就断开连接，这样极大的减少了传输时间。</p>
</li>
<li><p>HTTP是媒体独立的：即只有客户端和服务端知道怎么处理传输的内容、以及内容的格式，任何格式的数据都可以通过HTTP协议传输，客户端和服务端用指定的type去接收和处理。</p>
</li>
<li><p>HTTP是无状态的：无状态是指协议对于事务处理没有记忆能力，意味着如果后续处理需要前面连接的数据，那么这些数据需要重新传输，这样就导致了连接时的数据量增大，另一方面，在服务器不需要先前信息时传输较快。</p>
</li>
</ol>
<h4 id="HTTP消息结构"><a href="#HTTP消息结构" class="headerlink" title="HTTP消息结构"></a>HTTP消息结构</h4><p>​    HTTP使用统一资源标识符（Uniform Resource Identifiers,URI）来传输数据和建立连接。</p>
<h5 id="客户端请求消息"><a href="#客户端请求消息" class="headerlink" title="客户端请求消息"></a>客户端请求消息</h5><p>​    客户端发送一个HTTP请求到服务端的请求消息格式：请求行（request line）、请求头部（header） 、空行和请求数据四部分组成。下图为请求报文的一般格式。</p>
<p><img src="/2019/03/28/HTTP协议-1/clientRequest.png" alt="clientRequest"></p>
<h5 id="服务器响应消息"><a href="#服务器响应消息" class="headerlink" title="服务器响应消息"></a>服务器响应消息</h5><p>​    HTTP响应也是由四个部分组成，分别是：状态行、消息报头、空行和响应正文。</p>
<p><img src="/2019/03/28/HTTP协议-1/serverResponse.jpg" alt="serverResponse"></p>
<h4 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h4><p>以下是使用GET来传递数据的实例：</p>
<p>客户端请求：</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">GET</span> <span class="string">/hello.txt</span> HTTP/1.1</span><br><span class="line"><span class="attribute">User-Agent</span>: curl/7.16.3 libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3</span><br><span class="line"><span class="attribute">Host</span>: www.example.com</span><br><span class="line"><span class="attribute">Accept-Language</span>: en, mi</span><br></pre></td></tr></table></figure>
<p>服务端响应：</p>
<figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 <span class="number">200</span> OK</span><br><span class="line"><span class="attribute">Date</span>: Mon, 27 Jul 2009 12:28:53 GMT</span><br><span class="line"><span class="attribute">Server</span>: Apache</span><br><span class="line"><span class="attribute">Last-Modified</span>: Wed, 22 Jul 2009 19:15:56 GMT</span><br><span class="line"><span class="attribute">ETag</span>: "34aa387-d-1568eb00"</span><br><span class="line"><span class="attribute">Accept-Ranges</span>: bytes</span><br><span class="line"><span class="attribute">Content-Length</span>: 51</span><br><span class="line"><span class="attribute">Vary</span>: Accept-Encoding</span><br><span class="line"><span class="attribute">Content-Type</span>: text/plain</span><br></pre></td></tr></table></figure>
<p>输出结果：</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello World! My payload includes <span class="keyword">a</span> trailing <span class="literal">CRLF</span>.</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/23/压缩与解压/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/23/压缩与解压/" itemprop="url">压缩与解压</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-23T19:55:13+08:00">
                2019-03-23
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Liunx-指令学习/" itemprop="url" rel="index">
                    <span itemprop="name">Liunx 指令学习</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>1.基础压缩指令<br>    gzip file        压缩对应文件，源文件移除，如果是多个文件压缩，则被分别压缩，不会打包。(压缩后文件名file.gz)<br>    gunzip file.gz        解压file.gz，压缩包移除。<br>    bzip2 file (-k)    同gzip,但是压缩后的文件名file.bz2, k表示源文件保留<br>    bunzip2 file.bz2   同gunzip<br>    两者都不能压缩名录<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/03/23/压缩与解压/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/19/Web服务器搭建/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/19/Web服务器搭建/" itemprop="url">Web服务器搭建</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-19T21:42:57+08:00">
                2019-03-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web/" itemprop="url" rel="index">
                    <span itemprop="name">Web</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Web服务器搭建"><a href="#Web服务器搭建" class="headerlink" title="Web服务器搭建"></a>Web服务器搭建</h1><p>web服务器 初始安装配置   lnmp （PHP 7 mysql 5.7）<br><a href="https://www.jianshu.com/p/ed2d1820bd3e" target="_blank" rel="noopener">https://www.jianshu.com/p/ed2d1820bd3e</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/19/内存中堆和栈的理解/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/19/内存中堆和栈的理解/" itemprop="url">内存中堆和栈的理解</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-19T21:42:57+08:00">
                2019-03-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li>栈<br>现在计算机都直接在代码底层支持栈的结构，这体现在，底层有专门的寄存器指向栈所在的地址（SS，堆栈段寄存器，存放堆栈段地址）；有专门的机器指令完成这种入栈出栈的操作（push，pop）。<br>这种机制效率较高，但支持的数据类型较少，一般是整数，浮点，指针等系统直接支持的数据类型，并不支持其他的数据结构（自定义栈）。因为这种特点，栈在程序中的使用特别频繁，对于子程序的调用，就是直接利用栈完成的，机器的call指令中隐含了把返回地址入栈，而子程序的ret指令则是从堆栈中弹出返回地址并跳转的操作。</li>
<li>堆<br> 堆是由函数库提供的而不是系统支持，基本malloc/calloc/realloc/free函数维护了一套内部的堆结构（在C++中则增加了new/delete维护）。</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/19/内存区介绍/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/19/内存区介绍/" itemprop="url">内存区介绍</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-19T21:42:57+08:00">
                2019-03-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>内存主要分为五个区域：<br></p>
          <!--noindex-->
          <div class="post-button text-center">
            <a class="btn" href="/2019/03/19/内存区介绍/#more" rel="contents">
              Read more &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/19/内存分配的实例分析/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Tokey">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="轩中听雨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/19/内存分配的实例分析/" itemprop="url">内存分配的实例分析</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-19T21:42:57+08:00">
                2019-03-19
              </time>
            

            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C++</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <a id="more"></a>
<p>//实例1</p>
<pre><code>int a = 0; //全局初始化区  
char *p1;  //全局未初始化区(C++中则初始化为NULL)
int main()  {  
        int b;                  //b分配在栈上，整型  
        char s[] = &quot;abc&quot;;       //s分配在栈上，char *类型；&quot;abc\0&quot;分配在栈上，运行时赋值，函数结束销毁
        char *p2;               //p2分配在栈上，未初始化  
        char *p3 = &quot;123456&quot;;    //p3指向&quot;123456&quot;分配在字符串常量存储区的地址，编译时确定  p3存储在栈上
        static int c = 0;       //c在全局（静态）初始化区，可以多次跨函数调用而保持原值  
        p1 = (char *)malloc(10); //p1在全局未初始化区，指向分配得来得10字节的堆区地址  
        p2 = (char *)malloc(20); //p2指向分配得来得20字节的堆区地址 
        strcpy(p1, &quot;123456&quot;);    //&quot;123456&quot;放在字符串常量存储区，编译器可能会将它与p3所指向的&quot;123456&quot;优化成一块
        return 0;
}  
</code></pre><p>//实例2（找bug）</p>
<pre><code>#include &lt;iostream&gt;
using namespace std;
int main(){
    char a[] = &quot;hello&quot;;
    //a分配在栈上,char* 类型，“hellp\0”分配在栈上，运行时赋值，程序结束时销毁。
    a[0] = &apos;X&apos;;
    cout &lt;&lt; a &lt;&lt; endl;
    char *p = &quot;world&quot;;
    //p分配在栈上，char* 类型，“world\0”存于常量存储区（常量字符串），编译时p存入栈里。
    p[0] = &apos;X&apos;;
    cout &lt;&lt; p &lt;&lt; endl; 
    return 0;
}
</code></pre><p>其中字符数组a的容量是6，内容是“hello\0”，a的内容是可变的，而p分配在栈上，指向的地址在常量存储区，不可修改，因此修改p的时候会出现非法内存访问。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Tokey</p>
              <p class="site-description motion-element" itemprop="description">TokeyRoad</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">11</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Tokey</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
